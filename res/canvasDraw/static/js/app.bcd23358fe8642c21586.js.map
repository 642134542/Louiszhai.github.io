{"version":3,"sources":["webpack:///static/js/app.bcd23358fe8642c21586.js","webpack:///./src/router/index.js","webpack:///./src/App.vue?fc6a","webpack:///./src/main.js","webpack:///./src/utils/draw.js","webpack:///App.vue","webpack:///canvas.vue","webpack:///./src/components/canvas.vue?5187","webpack:///./src/components/canvas.vue?a7b4","webpack:///./src/App.vue?b069"],"names":["webpackJsonp","11","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__components_canvas__","__WEBPACK_IMPORTED_MODULE_2__components_canvas___default","n","use","routes","path","name","component","a","12","exports","injectStyle","ssrContext","Component","13","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_1__App__","__WEBPACK_IMPORTED_MODULE_1__App___default","__WEBPACK_IMPORTED_MODULE_2__router__","config","productionTip","el","router","template","components","App","14","Draw","canvas","degree","arguments","length","undefined","this","_window$getComputedSt","window","getComputedStyle","width","height","replace","context","getContext","devicePixelRatio","style","scale","lineWidth","strokeStyle","lineCap","lineJoin","shadowBlur","shadowColor","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","_canvas$getBoundingCl","getBoundingClientRect","left","top","point","isMobile","test","navigator","userAgent","pressed","paint","signal","beginPath","moveTo","x","y","lineTo","stroke","create","e","touches","clientX","clientY","start","move","requestAnimationFrame","optimizedMove","addEventListener","forEach","event","rotate","Math","PI","translate","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__","prototype","w","h","tmpCanvas","document","createElement","tmpContext","drawImage","image","degreePI","getPNGImage","toDataURL","getJPGImage","downloadPNGImage","type","url","location","href","dataURLtoBlob","dataURL","arr","split","mime","match","bStr","atob","u8arr","Uint8Array","charCodeAt","Blob","clear","clearRect","15","16","__WEBPACK_IMPORTED_MODULE_0__utils_draw__","data","msg","mounted","_this","setTimeout","initCanvas","computed","getHorizontalStyle","d","innerWidth","documentElement","clientWidth","body","innerHeight","clientHeight","transform","transformOrigin","methods","querySelector","draw","download","45","46","47","48","render","_vm","_h","$createElement","_c","_self","attrs","id","staticClass","_v","_s","on","touchstart","mousedown","staticRenderFns","49"],"mappings":"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","file":"static/js/app.bcd23358fe8642c21586.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 11:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_canvas__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_canvas___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_canvas__);\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({\n  routes: [{\n    path: '/',\n    name: 'Canvas',\n    component: __WEBPACK_IMPORTED_MODULE_2__components_canvas___default.a\n  }]\n}));\n\n/***/ }),\n\n/***/ 12:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(46)\n}\nvar Component = __webpack_require__(10)(\n  /* script */\n  __webpack_require__(15),\n  /* template */\n  __webpack_require__(49),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 13:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(11);\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].config.productionTip = false;\n\n/* eslint-disable no-new */\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  template: '<App/>',\n  components: { App: __WEBPACK_IMPORTED_MODULE_1__App___default.a }\n});\n\n/***/ }),\n\n/***/ 14:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__);\n\n/**\n * Created by louizhai on 17/6/30.\n * description: Use canvas to draw.\n */\nfunction Draw(canvas, degree) {\n  var config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  if (!(this instanceof Draw)) {\n    return new Draw(canvas, config);\n  }\n\n  var _window$getComputedSt = window.getComputedStyle(canvas, null),\n      width = _window$getComputedSt.width,\n      height = _window$getComputedSt.height;\n\n  width = width.replace('px', '');\n  height = height.replace('px', '');\n\n  this.canvas = canvas;\n  this.context = canvas.getContext('2d');\n  this.width = width;\n  this.height = height;\n  var context = this.context;\n\n  // 根据设备像素比优化canvas绘图\n  var devicePixelRatio = window.devicePixelRatio;\n  if (devicePixelRatio) {\n    canvas.style.width = width + 'px';\n    canvas.style.height = height + 'px';\n    canvas.height = height * devicePixelRatio;\n    canvas.width = width * devicePixelRatio;\n    context.scale(devicePixelRatio, devicePixelRatio);\n  } else {\n    canvas.width = width;\n    canvas.height = height;\n  }\n\n  context.lineWidth = 6;\n  context.strokeStyle = 'black';\n  context.lineCap = 'round';\n  context.lineJoin = 'round';\n  context.shadowBlur = 1;\n  context.shadowColor = 'black';\n  __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(context, config);\n\n  var _canvas$getBoundingCl = canvas.getBoundingClientRect(),\n      left = _canvas$getBoundingCl.left,\n      top = _canvas$getBoundingCl.top;\n\n  var point = {};\n  var isMobile = /phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone/i.test(navigator.userAgent);\n  var pressed = false;\n\n  var paint = function paint(signal) {\n    switch (signal) {\n      case 1:\n        context.beginPath();\n        context.moveTo(point.x, point.y);\n      case 2:\n        context.lineTo(point.x, point.y);\n        context.stroke();\n        break;\n      default:\n    }\n  };\n  var create = function create(signal) {\n    return function (e) {\n      if (signal === 1) {\n        pressed = true;\n      }\n      if (signal === 1 || pressed) {\n        e = isMobile ? e.touches[0] : e;\n        point.x = e.clientX - left;\n        point.y = e.clientY - top;\n        paint(signal);\n      }\n    };\n  };\n  var start = create(1);\n  var move = create(2);\n  var requestAnimationFrame = window.requestAnimationFrame;\n  var optimizedMove = requestAnimationFrame ? function (e) {\n    requestAnimationFrame(function () {\n      move(e);\n    });\n  } : move;\n\n  if (isMobile) {\n    canvas.addEventListener('touchstart', start);\n    canvas.addEventListener('touchmove', optimizedMove);\n  } else {\n    canvas.addEventListener('mousedown', start);\n    canvas.addEventListener('mousemove', optimizedMove);\n    ['mouseup', 'mouseleave'].forEach(function (event) {\n      canvas.addEventListener(event, function () {\n        pressed = false;\n      });\n    });\n  }\n\n  // 重置画布坐标系\n  if (typeof degree === 'number') {\n    this.degree = degree;\n    context.rotate(degree * Math.PI / 180);\n    switch (degree) {\n      case -90:\n        context.translate(-height, 0);\n        break;\n      case 90:\n        context.translate(0, -width);\n        break;\n      case -180:\n      case 180:\n        context.translate(-width, -height);\n      default:\n    }\n  }\n}\nDraw.prototype = {\n  scale: function scale(width, height) {\n    var canvas = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.canvas;\n\n    var w = canvas.width;\n    var h = canvas.height;\n    width = width || w;\n    height = height || h;\n    if (width !== w || height !== h) {\n      var tmpCanvas = document.createElement('canvas');\n      var tmpContext = tmpCanvas.getContext('2d');\n      tmpCanvas.width = width;\n      tmpCanvas.height = height;\n      tmpContext.drawImage(canvas, 0, 0, w, h, 0, 0, width, height);\n      canvas = tmpCanvas;\n    }\n    return canvas;\n  },\n  rotate: function rotate(degree) {\n    var image = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.canvas;\n\n    degree = ~~degree;\n    if (degree !== 0) {\n      var maxDegree = 180;\n      var minDegree = -90;\n      if (degree > maxDegree) {\n        degree = maxDegree;\n      } else if (degree < minDegree) {\n        degree = minDegree;\n      }\n\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      var height = image.height;\n      var width = image.width;\n      var degreePI = degree * Math.PI / 180;\n\n      switch (degree) {\n        // 逆时针旋转90°\n        case -90:\n          canvas.width = height;\n          canvas.height = width;\n          context.rotate(degreePI);\n          context.drawImage(image, -width, 0);\n          break;\n        // 顺时针旋转90°\n        case 90:\n          canvas.width = height;\n          canvas.height = width;\n          context.rotate(degreePI);\n          context.drawImage(image, 0, -height);\n          break;\n        // 顺时针旋转180°\n        case 180:\n          canvas.width = width;\n          canvas.height = height;\n          context.rotate(degreePI);\n          context.drawImage(image, -width, -height);\n          break;\n        default:\n      }\n      image = canvas;\n    }\n    return image;\n  },\n  getPNGImage: function getPNGImage() {\n    var canvas = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.canvas;\n\n    return canvas.toDataURL('image/png');\n  },\n  getJPGImage: function getJPGImage() {\n    var canvas = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.canvas;\n\n    return canvas.toDataURL('image/jpeg', 0.5);\n  },\n  downloadPNGImage: function downloadPNGImage(image) {\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'png';\n\n    var url = image.replace('image/' + type, 'image/octet-stream;Content-Disposition:attachment;filename=test.' + type);\n    window.location.href = url;\n  },\n  dataURLtoBlob: function dataURLtoBlob(dataURL) {\n    var arr = dataURL.split(',');\n    var mime = arr[0].match(/:(.*?);/)[1];\n    var bStr = atob(arr[1]);\n    var n = bStr.length;\n    var u8arr = new Uint8Array(n);\n    while (n--) {\n      u8arr[n] = bStr.charCodeAt(n);\n    }\n    return new Blob([u8arr], { type: mime });\n  },\n  clear: function clear() {\n    var width = void 0;\n    var height = void 0;\n    switch (this.degree) {\n      case -90:\n      case 90:\n        width = this.height;\n        height = this.width;\n        break;\n      default:\n        width = this.width;\n        height = this.height;\n    }\n    this.context.clearRect(0, 0, width, height);\n  }\n};\n/* harmony default export */ __webpack_exports__[\"a\"] = (Draw);\n\n/***/ }),\n\n/***/ 15:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'app'\n});\n\n/***/ }),\n\n/***/ 16:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_draw__ = __webpack_require__(14);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'canvas',\n  data: function data() {\n    return {\n      msg: 'Just use canvas to draw',\n      degree: 0 // 屏幕整体旋转的角度, 可取 -90,90,180等值\n    };\n  },\n\n  components: {\n    Draw: __WEBPACK_IMPORTED_MODULE_0__utils_draw__[\"a\" /* default */]\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    setTimeout(function () {\n      _this.initCanvas();\n    });\n  },\n\n  computed: {\n    getHorizontalStyle: function getHorizontalStyle() {\n      var d = document;\n      this.w = window.innerWidth || d.documentElement.clientWidth || d.body.clientWidth;\n      this.h = window.innerHeight || d.documentElement.clientHeight || d.body.clientHeight;\n      var length = (this.h - this.w) / 2;\n      var width = this.w;\n      var height = this.h;\n\n      switch (this.degree) {\n        case -90:\n          length = -length;\n        case 90:\n          width = this.h;\n          height = this.w;\n          break;\n        default:\n          length = 0;\n      }\n      return {\n        transform: 'rotate(' + this.degree + 'deg) translate(' + length + 'px,' + length + 'px)',\n        width: width + 'px',\n        height: height + 'px',\n        transformOrigin: 'center center'\n      };\n    }\n  },\n  methods: {\n    initCanvas: function initCanvas() {\n      var canvas = document.querySelector('canvas');\n      this.draw = new __WEBPACK_IMPORTED_MODULE_0__utils_draw__[\"a\" /* default */](canvas, -this.degree);\n    },\n    clear: function clear() {\n      this.draw.clear();\n    },\n    download: function download() {\n      this.draw.downloadPNGImage(this.draw.getPNGImage());\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 45:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 46:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 47:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(45)\n}\nvar Component = __webpack_require__(10)(\n  /* script */\n  __webpack_require__(16),\n  /* template */\n  __webpack_require__(48),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-00bcab1c\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 48:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    style: (_vm.getHorizontalStyle),\n    attrs: {\n      \"id\": \"canvasBox\"\n    }\n  }, [_c('div', {\n    staticClass: \"greet\"\n  }, [_c('span', [_vm._v(_vm._s(_vm.msg))]), _vm._v(\" \"), _c('a', {\n    on: {\n      \"touchstart\": _vm.clear,\n      \"mousedown\": _vm.clear\n    }\n  }, [_vm._v(\"清屏\")]), _vm._v(\" \"), _c('a', {\n    on: {\n      \"touchstart\": _vm.download,\n      \"mousedown\": _vm.download\n    }\n  }, [_vm._v(\"下载\")])]), _vm._v(\" \"), _c('canvas')])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 49:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('router-view')], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n},[13]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.bcd23358fe8642c21586.js","import Vue from 'vue';\nimport Router from 'vue-router';\nimport Canvas from '@/components/canvas';\n\nVue.use(Router);\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'Canvas',\n      component: Canvas,\n    },\n  ],\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-131eb1c2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-131eb1c2\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 12\n// module chunks = 1","import Vue from 'vue';\nimport App from './App';\nimport router from './router';\n\nVue.config.productionTip = false;\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  template: '<App/>',\n  components: { App },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","/**\n * Created by louizhai on 17/6/30.\n * description: Use canvas to draw.\n */\nfunction Draw(canvas, degree, config = {}) {\n  if (!(this instanceof Draw)) {\n    return new Draw(canvas, config);\n  }\n  let { width, height } = window.getComputedStyle(canvas, null);\n  width = width.replace('px', '');\n  height = height.replace('px', '');\n\n  this.canvas = canvas;\n  this.context = canvas.getContext('2d');\n  this.width = width;\n  this.height = height;\n  const context = this.context;\n\n  // 根据设备像素比优化canvas绘图\n  const devicePixelRatio = window.devicePixelRatio;\n  if (devicePixelRatio) {\n    canvas.style.width = `${width}px`;\n    canvas.style.height = `${height}px`;\n    canvas.height = height * devicePixelRatio;\n    canvas.width = width * devicePixelRatio;\n    context.scale(devicePixelRatio, devicePixelRatio);\n  } else {\n    canvas.width = width;\n    canvas.height = height;\n  }\n\n  context.lineWidth = 6;\n  context.strokeStyle = 'black';\n  context.lineCap = 'round';\n  context.lineJoin = 'round';\n  context.shadowBlur = 1;\n  context.shadowColor = 'black';\n  Object.assign(context, config);\n\n  const { left, top } = canvas.getBoundingClientRect();\n  const point = {};\n  const isMobile = /phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone/i.test(navigator.userAgent);\n  let pressed = false;\n\n  const paint = (signal) => {\n    switch (signal) {\n      case 1:\n        context.beginPath();\n        context.moveTo(point.x, point.y);\n      case 2:\n        context.lineTo(point.x, point.y);\n        context.stroke();\n        break;\n      default:\n    }\n  };\n  const create = signal => (e) => {\n    if (signal === 1) {\n      pressed = true;\n    }\n    if (signal === 1 || pressed) {\n      e = isMobile ? e.touches[0] : e;\n      point.x = e.clientX - left;\n      point.y = e.clientY - top;\n      paint(signal);\n    }\n  };\n  const start = create(1);\n  const move = create(2);\n  const requestAnimationFrame = window.requestAnimationFrame;\n  const optimizedMove = requestAnimationFrame ? (e) => {\n    requestAnimationFrame(() => {\n      move(e);\n    });\n  } : move;\n\n  if (isMobile) {\n    canvas.addEventListener('touchstart', start);\n    canvas.addEventListener('touchmove', optimizedMove);\n  } else {\n    canvas.addEventListener('mousedown', start);\n    canvas.addEventListener('mousemove', optimizedMove);\n    ['mouseup', 'mouseleave'].forEach((event) => {\n      canvas.addEventListener(event, () => {\n        pressed = false;\n      });\n    });\n  }\n\n  // 重置画布坐标系\n  if (typeof degree === 'number') {\n    this.degree = degree;\n    context.rotate((degree * Math.PI) / 180);\n    switch (degree) {\n      case -90:\n        context.translate(-height, 0);\n        break;\n      case 90:\n        context.translate(0, -width);\n        break;\n      case -180:\n      case 180:\n        context.translate(-width, -height);\n      default:\n    }\n  }\n}\nDraw.prototype = {\n  scale(width, height, canvas = this.canvas) {\n    const w = canvas.width;\n    const h = canvas.height;\n    width = width || w;\n    height = height || h;\n    if (width !== w || height !== h) {\n      const tmpCanvas = document.createElement('canvas');\n      const tmpContext = tmpCanvas.getContext('2d');\n      tmpCanvas.width = width;\n      tmpCanvas.height = height;\n      tmpContext.drawImage(canvas, 0, 0, w, h, 0, 0, width, height);\n      canvas = tmpCanvas;\n    }\n    return canvas;\n  },\n  rotate(degree, image = this.canvas) {\n    degree = ~~degree;\n    if (degree !== 0) {\n      const maxDegree = 180;\n      const minDegree = -90;\n      if (degree > maxDegree) {\n        degree = maxDegree;\n      } else if (degree < minDegree) {\n        degree = minDegree;\n      }\n\n      const canvas = document.createElement('canvas');\n      const context = canvas.getContext('2d');\n      const height = image.height;\n      const width = image.width;\n      const degreePI = (degree * Math.PI) / 180;\n\n      switch (degree) {\n        // 逆时针旋转90°\n        case -90:\n          canvas.width = height;\n          canvas.height = width;\n          context.rotate(degreePI);\n          context.drawImage(image, -width, 0);\n          break;\n        // 顺时针旋转90°\n        case 90:\n          canvas.width = height;\n          canvas.height = width;\n          context.rotate(degreePI);\n          context.drawImage(image, 0, -height);\n          break;\n        // 顺时针旋转180°\n        case 180:\n          canvas.width = width;\n          canvas.height = height;\n          context.rotate(degreePI);\n          context.drawImage(image, -width, -height);\n          break;\n        default:\n      }\n      image = canvas;\n    }\n    return image;\n  },\n  getPNGImage(canvas = this.canvas) {\n    return canvas.toDataURL('image/png');\n  },\n  getJPGImage(canvas = this.canvas) {\n    return canvas.toDataURL('image/jpeg', 0.5);\n  },\n  downloadPNGImage(image, type = 'png') {\n    const url = image.replace(`image/${type}`, `image/octet-stream;Content-Disposition:attachment;filename=test.${type}`);\n    window.location.href = url;\n  },\n  dataURLtoBlob(dataURL) {\n    const arr = dataURL.split(',');\n    const mime = arr[0].match(/:(.*?);/)[1];\n    const bStr = atob(arr[1]);\n    let n = bStr.length;\n    const u8arr = new Uint8Array(n);\n    while (n--) {\n      u8arr[n] = bStr.charCodeAt(n);\n    }\n    return new Blob([u8arr], { type: mime });\n  },\n  clear() {\n    let width;\n    let height;\n    switch (this.degree) {\n      case -90:\n      case 90:\n        width = this.height;\n        height = this.width;\n        break;\n      default:\n        width = this.width;\n        height = this.height;\n    }\n    this.context.clearRect(0, 0, width, height);\n  },\n};\nexport default Draw;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/draw.js","<template>\n  <div id=\"app\">\n    <router-view></router-view>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'app',\n};\n</script>\n\n<style>\n#app {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?1d019fa6","<template>\n  <div id=\"canvasBox\" :style=\"getHorizontalStyle\">\n    <div class=\"greet\">\n      <span>{{msg}}</span>\n      <a @touchstart=\"clear\" @mousedown=\"clear\">清屏</a>\n      <a @touchstart=\"download\" @mousedown=\"download\">下载</a>\n    </div>\n    <canvas></canvas>\n  </div>\n</template>\n\n<script>\nimport Draw from '../utils/draw';\n\nexport default {\n  name: 'canvas',\n  data() {\n    return {\n      msg: 'Just use canvas to draw',\n      degree: 0, // 屏幕整体旋转的角度, 可取 -90,90,180等值\n    };\n  },\n  components: {\n    Draw,\n  },\n  mounted() {\n    setTimeout(() => {\n      this.initCanvas();\n    });\n  },\n  computed: {\n    getHorizontalStyle() {\n      const d = document;\n      this.w = window.innerWidth || d.documentElement.clientWidth || d.body.clientWidth;\n      this.h = window.innerHeight || d.documentElement.clientHeight || d.body.clientHeight;\n      let length = (this.h - this.w) / 2;\n      let width = this.w;\n      let height = this.h;\n\n      switch (this.degree) {\n        case -90:\n          length = -length;\n        case 90:\n          width = this.h;\n          height = this.w;\n          break;\n        default:\n          length = 0;\n      }\n      return {\n        transform: `rotate(${this.degree}deg) translate(${length}px,${length}px)`,\n        width: `${width}px`,\n        height: `${height}px`,\n        transformOrigin: 'center center',\n      };\n    },\n  },\n  methods: {\n    initCanvas() {\n      const canvas = document.querySelector('canvas');\n      this.draw = new Draw(canvas, -this.degree);\n    },\n    clear() {\n      this.draw.clear();\n    },\n    download() {\n      this.draw.downloadPNGImage(this.draw.getPNGImage());\n    },\n  },\n};\n\n\n</script>\n\n<style scoped>\n#canvasBox {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n.greet {\n  padding: 1rem;\n  font-size: 1.5rem;\n  user-select: none;\n}\n.greet a {\n  cursor: pointer;\n}\ncanvas {\n  flex: 1;\n  cursor: cross;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// canvas.vue?1bf9223c","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-00bcab1c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./canvas.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./canvas.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-00bcab1c\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./canvas.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-00bcab1c\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/canvas.vue\n// module id = 47\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    style: (_vm.getHorizontalStyle),\n    attrs: {\n      \"id\": \"canvasBox\"\n    }\n  }, [_c('div', {\n    staticClass: \"greet\"\n  }, [_c('span', [_vm._v(_vm._s(_vm.msg))]), _vm._v(\" \"), _c('a', {\n    on: {\n      \"touchstart\": _vm.clear,\n      \"mousedown\": _vm.clear\n    }\n  }, [_vm._v(\"清屏\")]), _vm._v(\" \"), _c('a', {\n    on: {\n      \"touchstart\": _vm.download,\n      \"mousedown\": _vm.download\n    }\n  }, [_vm._v(\"下载\")])]), _vm._v(\" \"), _c('canvas')])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-00bcab1c\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/canvas.vue\n// module id = 48\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('router-view')], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-131eb1c2\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 49\n// module chunks = 1"],"sourceRoot":""}