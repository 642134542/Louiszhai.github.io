webpackJsonp([1],{11:function(e,t,n){"use strict";var a=n(4),i=n(50),o=n(47),r=n.n(o);a.a.use(i.a),t.a=new i.a({routes:[{path:"/",name:"Canvas",component:r.a}]})},12:function(e,t,n){function a(e){n(46)}var i=n(10)(n(15),n(49),a,null,null);e.exports=i.exports},13:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),i=n(12),o=n.n(i),r=n(11);a.a.config.productionTip=!1,new a.a({el:"#app",router:r.a,template:"<App/>",components:{App:o.a}})},14:function(e,t,n){"use strict";function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(this instanceof a))return new a(e,n);var i=window.getComputedStyle(e,null),r=i.width,s=i.height;r=r.replace("px",""),s=s.replace("px",""),this.canvas=e,this.context=e.getContext("2d"),this.width=r,this.height=s;var c=this.context,d=window.devicePixelRatio;d?(e.style.width=r+"px",e.style.height=s+"px",e.height=s*d,e.width=r*d,c.scale(d,d)):(e.width=r,e.height=s),c.lineWidth=6,c.strokeStyle="black",c.lineCap="round",c.lineJoin="round",c.shadowBlur=1,c.shadowColor="black",o()(c,n);var h=e.getBoundingClientRect(),u=h.left,l=h.top,v={},g=/phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone/i.test(navigator.userAgent),m=!1,p=function(e){switch(e){case 1:c.beginPath(),c.moveTo(v.x,v.y);case 2:c.lineTo(v.x,v.y),c.stroke()}},w=function(e){return function(t){1===e&&(m=!0),(1===e||m)&&(t=g?t.touches[0]:t,v.x=t.clientX-u,v.y=t.clientY-l,p(e))}},f=w(1),x=w(2),y=window.requestAnimationFrame,b=y?function(e){y(function(){x(e)})}:x;if(g?(e.addEventListener("touchstart",f),e.addEventListener("touchmove",b)):(e.addEventListener("mousedown",f),e.addEventListener("mousemove",b),["mouseup","mouseleave"].forEach(function(t){e.addEventListener(t,function(){m=!1})})),"number"==typeof t)switch(this.degree=t,c.rotate(t*Math.PI/180),t){case-90:c.translate(-s,0);break;case 90:c.translate(0,-r);break;case-180:case 180:c.translate(-r,-s)}}var i=n(17),o=n.n(i);a.prototype={scale:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.canvas,a=n.width,i=n.height;if(e=e||a,t=t||i,e!==a||t!==i){var o=document.createElement("canvas"),r=o.getContext("2d");o.width=e,o.height=t,r.drawImage(n,0,0,a,i,0,0,e,t),n=o}return n},rotate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.canvas;if(0!==(e=~~e)){e>180?e=180:e<-90&&(e=-90);var n=document.createElement("canvas"),a=n.getContext("2d"),i=t.height,o=t.width,r=e*Math.PI/180;switch(e){case-90:n.width=i,n.height=o,a.rotate(r),a.drawImage(t,-o,0);break;case 90:n.width=i,n.height=o,a.rotate(r),a.drawImage(t,0,-i);break;case 180:n.width=o,n.height=i,a.rotate(r),a.drawImage(t,-o,-i)}t=n}return t},getPNGImage:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.canvas).toDataURL("image/png")},getJPGImage:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.canvas).toDataURL("image/jpeg",.5)},downloadPNGImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"png",n=e.replace("image/"+t,"image/octet-stream;Content-Disposition:attachment;filename=test."+t);window.location.href=n},dataURLtoBlob:function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],a=atob(t[1]),i=a.length,o=new Uint8Array(i);i--;)o[i]=a.charCodeAt(i);return new Blob([o],{type:n})},clear:function(){var e=void 0,t=void 0;switch(this.degree){case-90:case 90:e=this.height,t=this.width;break;default:e=this.width,t=this.height}this.context.clearRect(0,0,e,t)}},t.a=a},15:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},16:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(14);t.default={name:"canvas",data:function(){return{msg:"Just use canvas to draw",degree:0,scope:[{value:0,title:"正常"},{value:90,title:"顺时针旋转90°"},{value:180,title:"顺时针旋转180°"},{value:-90,title:"逆时针旋转90°"}]}},components:{Draw:a.a},mounted:function(){this.canvasBox=document.getElementById("canvasBox"),this.initCanvas()},computed:{getHorizontalStyle:function(){var e=this,t=document;this.w=window.innerWidth||t.documentElement.clientWidth||t.body.clientWidth,this.h=window.innerHeight||t.documentElement.clientHeight||t.body.clientHeight;var n=(this.h-this.w)/2,a=this.w,i=this.h;switch(this.degree){case-90:n=-n;case 90:a=this.h,i=this.w;break;default:n=0}return this.canvasBox&&(this.canvasBox.removeChild(document.querySelector("canvas")),this.canvasBox.appendChild(document.createElement("canvas")),setTimeout(function(){e.initCanvas()},200)),{transform:"rotate("+this.degree+"deg) translate("+n+"px,"+n+"px)",width:a+"px",height:i+"px",transformOrigin:"center center"}}},methods:{initCanvas:function(){var e=document.querySelector("canvas");this.draw=new a.a(e,-this.degree)},clear:function(){this.draw.clear()},download:function(){this.draw.downloadPNGImage(this.draw.getPNGImage())}}}},45:function(e,t){},46:function(e,t){},47:function(e,t,n){function a(e){n(45)}var i=n(10)(n(16),n(48),a,null,null);e.exports=i.exports},48:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:e.getHorizontalStyle,attrs:{id:"canvasBox"}},[n("div",{staticClass:"greet"},[n("span",[e._v(e._s(e.msg))]),e._v(" "),n("a",{on:{touchstart:e.clear,mousedown:e.clear}},[e._v("清屏")]),e._v(" "),n("a",{on:{touchstart:e.download,mousedown:e.download}},[e._v("下载")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.degree,expression:"degree"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.degree=t.target.multiple?n:n[0]}}},e._l(e.scope,function(t){return n("option",{domProps:{value:t.value}},[e._v(e._s(t.title))])}))]),e._v(" "),n("canvas")])},staticRenderFns:[]}},49:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]}}},[13]);
//# sourceMappingURL=app.5b3b5fee30eb07cc028e.js.map